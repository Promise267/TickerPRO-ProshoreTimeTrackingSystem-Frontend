import{A as R,r as n,o as l,c as i,a as t,i as z,b as S,z as N,B as D,F as U,g as A,t as h,h as L,e as I,C as O,D as M,E as G,p as F,d as K,G as q}from"./index.98eba871.js";import{v as P}from"./validateName.9f9d9069.js";import{v as W}from"./validateEmail.6be92a2d.js";import{_ as V}from"./BaseAlert.vue_vue_type_style_index_0_lang.68c3382f.js";import{i as T}from"./index.min.0055c6b2.js";import{_ as Y}from"./plugin-vue_export-helper.21dcd24c.js";import{T as j,_ as H}from"./BaseHeading.81cf2b9a.js";import"./logo.f5257f33.js";const J="/api/all-roles",Q="/api/admin/invite",X="/api/invite/invited-users",Z="/api/invite/resend",tt="/api/invite/revoke/",et="/api/admin/users",st="/api/admin/user",at="/api/admin/user-status";var k={ALL_ROLES_URL:J,INVITE_MEMBER_URL:Q,INVITED_MEMBERS_LIST_URL:X,REINVITE_URL:Z,REINVOKE_URL:tt,REGISTER_USER_LIST_URL:et,DELETE_USER_URL:st,ENABLE_USER_URL:at};const ot=async()=>await R.get(k.ALL_ROLES_URL),nt=async(r,a)=>await R.post(k.INVITE_MEMBER_URL,r,{headers:{Authorization:a}}),lt=async r=>await R.get(k.INVITED_MEMBERS_LIST_URL,{headers:{Authorization:r}}),it=async(r,a)=>await R.post(k.REINVITE_URL,a,{headers:{Authorization:r}}),rt=async(r,a)=>await R.delete(`${k.REINVOKE_URL}${a}`,{headers:{Authorization:r}}),ct=async r=>await R.get(k.REGISTER_USER_LIST_URL,{headers:{Authorization:r}}),dt=async(r,a)=>await R.delete(`${k.DELETE_USER_URL}/${a}`,{headers:{Authorization:r}}),ut=async(r,a)=>await R.patch(`${k.ENABLE_USER_URL}/${a}`,null,{headers:{Authorization:r}});const _t=t("button",{type:"button",class:"btn btn-sm btn-primary text-white","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Add New Member ",-1),ht={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},mt={class:"modal-dialog"},vt={class:"modal-content"},pt=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"exampleModalLabel"},"Add New Member"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),bt={class:"modal-body"},gt=["onSubmit"],yt={class:"mt-4"},ft=t("label",{for:"roles"},[I("Roles "),t("span",{class:"text-danger"},"*")],-1),wt=["value","textContent"],xt=["textContent"],Ct=t("div",{class:"mt-4 mb-2"},[t("button",{type:"submit",class:"btn btn-primary text-white"}," Send Invite ")],-1),Et={setup(r){const a=n(""),c=n(""),p=n(""),_=n(""),w=n(""),b=n(""),$=n(!1),x=n([]),d=n([]),m=T.exports.useToast();async function u(){try{const C=await ot();x.value=C.data.UserRoles}catch{d.value.push("Something went wrong, please try again later.")}}u();async function g(){_.value="",w.value="",b.value="",d.value=[],$.value=!1;const{isValid:C,errorMessage:y}=P(a.value),{isValid:v,errorMessage:e}=W(c.value);if(C||(_.value=y,a.value=""),v||(w.value=e,c.value=""),_.value===""&&w.value===""&&d.value.length===0)try{const{user:{id:s}}=O(),o={name:a.value,email:c.value,role_id:p.value,user_id:s},f=M();(await nt(o,f)).status===200&&($.value=!0,m.success("Invite is sent successfully!!!"),setTimeout(()=>{$.value=!1,location.reload()},1500),a.value="",c.value="",p.value="")}catch{m.error("Something went wrong, please try again later.")}}return(C,y)=>(l(),i(U,null,[_t,t("div",ht,[t("div",mt,[t("div",vt,[pt,t("div",bt,[t("form",{onSubmit:z(g,["prevent"])},[S(V,{type:"text",name:"name",label:"Full name",modelValue:a.value,"onUpdate:modelValue":y[0]||(y[0]=v=>a.value=v),error:_.value},null,8,["modelValue","error"]),S(V,{type:"email",name:"email",label:"Email address",modelValue:c.value,"onUpdate:modelValue":y[1]||(y[1]=v=>c.value=v),error:w.value},null,8,["modelValue","error"]),t("div",yt,[ft,x.value.length?N((l(),i("select",{key:0,class:"form-select mt-2","aria-label":"roles select menu","onUpdate:modelValue":y[2]||(y[2]=v=>p.value=v),required:""},[(l(!0),i(U,null,A(x.value,v=>(l(),i("option",{key:v.id,value:v.id,textContent:h(`${v.role.toUpperCase()}`)},null,8,wt))),128))],512)),[[D,p.value]]):L("",!0),b.value?(l(),i("div",{key:1,class:"form-text text-danger",textContent:h(b.value)},null,8,xt)):L("",!0)]),Ct],40,gt)])])])])],64))}},$t={class:"mt-2 fs-5"},Lt=I(" Invited Members "),Rt=["textContent"],kt={key:0,class:"alert alert-success alert-dismissible fade show mt-2",role:"alert"},St=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1),Mt={class:"mt-3 border border-bottom-0 rounded"},Ut={class:"table table-hover"},It=t("thead",{class:"text-primary"},[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"Name"),t("th",{scope:"col"},"Email"),t("th",{scope:"col"},"Role"),t("th",{scope:"col"},"Status"),t("th",{scope:"col"},"Action"),t("th",{scope:"col"})])],-1),Bt={key:0},At={key:1},Vt=["textContent"],Nt=["textContent"],Tt=["textContent"],zt=["textContent"],Dt=["textContent"],Ot=["onClick"],Gt=t("button",{class:"btn btn-light dropdown-toggle btn-sm",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"true"},null,-1),Ft={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Kt=["onClick"],qt={setup(r){const a=n(0),c=n([]),p=n(!0);n([]);const _=n(""),w=d=>d===!1?"Wait":"Active";async function b(d,m){_.value="";try{const u=M(),g=await it(u,{email:d,name:m});g.status==200&&x(),_.value=g.data.message}catch(u){console.log(u)}}async function $(d){_.value="";try{const m=M(),u=await rt(m,d);_.value=u.data.message,u.status==200&&x()}catch(m){console.log(m)}}async function x(){try{const d=M(),m=await lt(d);c.value=m.data.invitedUsers,a.value=m.data.total,p.value=!1}catch(d){console.log(d)}}return x(),(d,m)=>(l(),i(U,null,[t("div",$t,[Lt,a.value?(l(),i("span",{key:0,textContent:h(`(${a.value})`)},null,8,Rt)):L("",!0)]),_.value?(l(),i("div",kt,[I(h(_.value)+" ",1),St])):L("",!0),S(Et),t("div",Mt,[t("table",Ut,[It,p.value?(l(),i("p",Bt,"Loading...")):L("",!0),c.value.length?(l(),i("tbody",At,[(l(!0),i(U,null,A(c.value,(u,g)=>(l(),i("tr",{key:g},[t("th",{scope:"row",textContent:h(`${g+1}`)},null,8,Vt),t("td",{textContent:h(u.name)},null,8,Nt),t("td",{class:"gray-color",textContent:h(u.email)},null,8,Tt),t("td",{textContent:h(u.role.role.toUpperCase())},null,8,zt),t("td",{class:"gray-color",textContent:h(w(u.inviteAccepted))},null,8,Dt),t("td",null,[t("button",{class:"btn btn-light btn-sm",onClick:C=>b(u.email,u.name)}," Reinvite ",8,Ot)]),t("td",null,[Gt,t("ul",Ft,[t("li",null,[t("a",{class:"dropdown-item",onClick:C=>$(u.id)}," Revoke ",8,Kt)])])])]))),128))])):L("",!0)])])],64))}};const E=r=>(F("data-v-5f789751"),r=r(),K(),r),Pt={class:"mt-5 fs-5"},Wt=I(" All Members "),Yt=["textContent"],jt={class:"mt-3 border border-bottom-0 rounded"},Ht={class:"topnav"},Jt={class:"table table-hover"},Qt={class:"text-primary"},Xt=E(()=>t("th",{scope:"col"},[I("# "),t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-filter",viewBox:"0 0 16 16"},[t("path",{d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})])],-1)),Zt=I(" Name "),te=E(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-filter",viewBox:"0 0 16 16"},[t("path",{d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})],-1)),ee=[Zt,te],se=I(" Email "),ae=E(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-filter",viewBox:"0 0 16 16"},[t("path",{d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})],-1)),oe=[se,ae],ne=E(()=>t("th",{scope:"col"},"Status",-1)),le=E(()=>t("th",{scope:"col"},"Action",-1)),ie={key:0},re=["textContent"],ce=["textContent"],de=["textContent"],ue={key:0,class:"btn btn-light btn-sm"},_e=["onClick","textContent"],he={class:"dropdown"},me=E(()=>t("button",{class:"btn btn-light dropdown-toggle btn-sm",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"true"},null,-1)),ve={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},pe={key:0},be=E(()=>t("span",null,"Sorry, You can't delete Admin user!!!",-1)),ge=[be],ye={key:1},fe=["onClick"],we={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},xe={class:"modal-dialog modal-dialog-centered"},Ce={class:"modal-content"},Ee=E(()=>t("div",{class:"modal-header text-center border-0"},[t("h5",{class:"modal-title w-100",id:"staticBackdropLabel"}," Are you sure you want to delete? ")],-1)),$e={class:"modal-footer pull-right justify-content-center border-0"},Le=E(()=>t("button",{type:"button",class:"btn btn-secondary-outline","data-bs-dismiss":"modal","data-cy":"cancelDeleteRegisteredMember"}," Cancel ",-1)),Re={setup(r){const a=n(0),c=n([]),p=n(c.value),_=n(!0),w=n(!0),b=T.exports.useToast();n("desc"),n("desc");const $=n(null);function x(e){$.value=e}async function d(){try{const e=M(),s=await ct(e);c.value=s.data.users,a.value=s.data.total,_.value=!1}catch{alert("Something went wrong, please try again later")}}async function m(){try{const e=M(),s=await dt(e,c.value[$.value].id);_.value=!1,s.status==200&&(d(),b.success(s.data.message))}catch{b.error("Something went wrong, please try again later")}}async function u(e){try{const s=M(),o=await ut(s,c.value[e].id);_.value=!1,o.status==200&&(d(),b.success(o.data.message))}catch{b.error("Something went wrong, please try again later.")}}function g(e){return e=="1"?"Disable":"Enable"}function C(e){p.value.splice(0,c.value.length),c.value.forEach(s=>{s.name.includes(e)&&p.value.push(s),w.value=!1})}function y(e,s){return function(o,f){if(s==="asc")return o[e].toLowerCase()<f[e].toLowerCase()?1:o[e].toLowerCase()>f[e].toLowerCase()?-1:0;if(s==="desc")return o[e].toLowerCase()>f[e].toLowerCase()?1:o[e].toLowerCase()<f[e].toLowerCase()?-1:0}}function v(e){e==="email"&&(this.emailSortBy==="desc"?this.emailSortBy="asc":this.emailSortBy="desc"),e==="name"&&(this.nameSortBy==="desc"?this.nameSortBy="asc":this.nameSortBy="desc");let s=null;e==="email"&&(s=this.emailSortBy),e==="name"&&(s=this.nameSortBy),c.value.sort(y(e,s))}return d(),(e,s)=>(l(),i(U,null,[t("div",Pt,[Wt,a.value?(l(),i("span",{key:0,textContent:h(`(${a.value})`)},null,8,Yt)):L("",!0)]),t("div",jt,[t("div",Ht,[N(t("input",{type:"text",placeholder:"Search..","onUpdate:modelValue":s[0]||(s[0]=o=>e.value=o),onInput:s[1]||(s[1]=o=>C(e.value))},null,544),[[G,e.value]])]),t("table",Jt,[t("thead",Qt,[t("tr",null,[Xt,t("th",{onClick:s[2]||(s[2]=o=>v("name")),scope:"col"},ee),t("th",{onClick:s[3]||(s[3]=o=>v("email")),scope:"col"},oe),ne,le])]),_.value?(l(),i("p",ie,"Loading...")):L("",!0),t("tbody",null,[(l(!0),i(U,null,A(w.value?c.value:p.value,(o,f)=>(l(),i("tr",{key:o.id},[t("th",{scope:"row",textContent:h(f+1)},null,8,re),t("td",{textContent:h(o.name)},null,8,ce),t("td",{textContent:h(o.email)},null,8,de),t("td",null,h(g(o.active_status)==="Enable"?"Disabled":"Enabled"),1),t("td",null,[o.id===1?(l(),i("span",ue,"Admin")):(l(),i("button",{key:1,class:"btn btn-light btn-sm",onClick:B=>u(f),textContent:h(g(o.active_status))},null,8,_e))]),t("td",he,[me,t("ul",ve,[o.id===1?(l(),i("li",pe,ge)):(l(),i("li",ye,[t("button",{type:"button",class:"btn btn-light btn-sm mx-2","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop","data-cy":"deleteRegisteredMember",onClick:B=>x(f)}," Delete ",8,fe)]))]),t("div",we,[t("div",xe,[t("div",Ce,[Ee,t("div",$e,[Le,t("button",{type:"button",class:"btn btn-primary-outline text-primary",onClick:s[4]||(s[4]=B=>m()),"data-bs-dismiss":"modal","data-cy":"deleteRegisteredUserSuccessfully"}," Delete ")])])])])])]))),128))])])])],64))}};var ke=Y(Re,[["__scopeId","data-v-5f789751"]]);const Se={class:"teams__container"},ze={setup(r){const a=q();return a.userStatus=!1,(c,p)=>(l(),i(U,null,[S(j),t("main",null,[S(H,{title:"Teams"}),t("div",Se,[S(qt),S(ke)])])],64))}};export{ze as default};
