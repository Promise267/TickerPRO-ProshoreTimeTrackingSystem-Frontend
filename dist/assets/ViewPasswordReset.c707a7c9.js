import{r as l,o as g,c as y,a as t,u as e,b as r,w as h,R as P,h as $,i as B,j as C,F as M,e as c,l as S,by as U}from"./index.8d1f63de.js";import{_ as L}from"./BaseFormHeading.4563c656.js";import{_ as v,v as j}from"./validateEmail.678a129c.js";import{_ as q}from"./BaseAlert.9db8dd94.js";import{s as F,v as A}from"./validatePasswordConfirm.3da2fbc4.js";import{l as D}from"./logo.5b10267d.js";import{_ as V}from"./PasswordToggle.3d6cf5be.js";/* empty css                                                  */const z=["src"],G={class:"d-grid col-md-8 col-lg-5 mx-auto"},H={key:0,class:"alert alert-success",role:"alert"},I=c(" Password reset successfully! "),J=c("Login"),K=c(" to start using Time Tracker. "),O=["onSubmit"],Q={class:"input_form"},W={class:"input_form_confirmPassword"},X=t("div",{class:"d-grid"},[t("button",{type:"submit",class:"btn btn-primary text-white mt-3","data-cy":"passwordResetSubmit"}," Password reset ")],-1),Y={class:"mt-4"},Z=c(" Never mind! "),ss=t("u",null," Take me back to login",-1),us={setup(as){const f=S(),b=f.query.token,R=f.query.email,s=l({email:R,password:"",passwordConfirmation:""}),d=l(""),m=l(""),u=l(""),w=l(""),p=l(!1);let i=l(!1),n=l(!1);async function k(){d.value="",m.value="",u.value="",w.value="",p.value=!1;const{isValid:_,errorMessage:a}=j(s.value.email),{isValid:o,errorMessage:x}=F(s.value.password),{isValid:T,errorMessage:E}=A(s.value.passwordConfirmation,s.value.password);if(_||(d.value=a,s.value.email=""),o||(m.value=x,s.value.password=""),T||(u.value=E,s.value.passwordConfirmation=""),w.value.length===0&&!d.value&&!m.value&&!u.value){const N={email:s.value.email,password:s.value.password,password_confirmation:s.value.passwordConfirmation,token:b};try{await U(N),p.value=!0,s.value.email="",s.value.password="",s.value.passwordConfirmation=""}catch{w.value(response.data.message)}}}return(_,a)=>(g(),y(M,null,[t("img",{src:e(D),alt:"Ticker logo",class:"logo"},null,8,z),t("div",G,[r(L,{title:"Password Reset",shortDesc:"Reset password to restart your journey with Time Tracker."}),p.value?(g(),y("div",H,[I,r(e(P),{to:{name:"login"},class:"alert-link text-decoration-underline","data-cy":"loginAfterResetButton"},{default:h(()=>[J]),_:1}),K])):$("",!0),r(q,{message:w.value,"hex-font-color":"ff0000"},null,8,["message"]),t("form",{onSubmit:B(k,["prevent"])},[r(v,{type:"email",name:"email",label:"Email address",modelValue:s.value.email,"onUpdate:modelValue":a[0]||(a[0]=o=>s.value.email=o),error:d.value,"data-cy":"passwordResetEmail"},null,8,["modelValue","error"]),t("div",Q,[r(v,{type:e(i)?"text":"password",name:"password",label:"New password",modelValue:s.value.password,"onUpdate:modelValue":a[1]||(a[1]=o=>s.value.password=o),error:m.value,"data-cy":"passwordResetPassword"},null,8,["type","modelValue","error"]),r(V,{showPassword:e(i),onTogglePassword:a[2]||(a[2]=o=>C(i)?i.value=!e(i):i=!e(i))},null,8,["showPassword"])]),t("div",W,[r(v,{type:e(n)?"text":"password",name:"password-confirmation",label:"Confirm password",modelValue:s.value.passwordConfirmation,"onUpdate:modelValue":a[3]||(a[3]=o=>s.value.passwordConfirmation=o),error:u.value,"data-cy":"passwordResetConfirmation"},null,8,["type","modelValue","error"]),r(V,{showPassword:e(n),onTogglePassword:a[4]||(a[4]=o=>C(n)?n.value=!e(n):n=!e(n))},null,8,["showPassword"])]),X,t("p",Y,[Z,r(e(P),{to:{name:"login"},class:"text-secondary fw-normal","data-cy":"backToLoginButton"},{default:h(()=>[ss]),_:1})])],40,O)])],64))}};export{us as default};
