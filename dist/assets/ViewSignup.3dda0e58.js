import{r as n,f as F,s as R,o as r,c as l,a as t,u as b,b as o,w as y,h,F as k,g as q,i as $,e as i,l as A,v as D}from"./index.a82e036b.js";import{_ as v,a as j}from"./BaseAlert.a56e706f.js";import{_ as z}from"./BaseFormHeading.95b25140.js";import{v as G}from"./validateEmail.db033d63.js";import{v as H}from"./validatePassword.7ebb3638.js";import{v as I}from"./validateName.6ce7ed4b.js";import{l as J}from"./logo.5b10267d.js";function K(V,u){return u?V!==u?{isValid:!1,errorMessage:"Password did not match"}:{isValid:!0,errorMessage:""}:{isValid:!1,errorMessage:"Confirm Password is required."}}const O=["src"],Q={class:"d-grid col-md-8 col-lg-5 mx-auto"},W={key:0,class:"alert alert-success",role:"alert"},X=i(" Signup successfully! "),Y=i("Login"),Z=i(" to start using Ticker. "),ee={key:1,class:"alert alert-success",role:"alert"},ae=i(" Password reset successfully! "),se=i("Login"),oe=i(" to start using Ticker. "),re={key:2},le=["onSubmit"],te={class:"mb-3"},ne={key:0},ie={key:1},ue={class:"d-grid"},de=["disabled"],me={class:"mt-4"},ce=i(" Already have an account? "),ve=t("u",null,"Login",-1),Ve={setup(V){const u=A(),C=u.params.token,P=u.query.email,S=u.query.name,e=n({name:S,email:P,password:"",passwordConfirmation:""}),m=n(""),p=n(""),f=n(""),_=n(""),d=n([]),w=n(!1),U=F(()=>e.value.name===""||e.value.email===""||e.value.password===""||e.value.passwordConfirmation==="");async function x(){d.value=[],m.value="",p.value="",f.value="",_.value="",w.value=!1;const{isValid:g,errorMessage:s}=I(e.value.name),{isValid:c,errorMessage:a}=G(e.value.email),{isValid:N,errorMessage:E}=H(e.value.password),{isValid:M,errorMessage:L}=K(e.value.password,e.value.passwordConfirmation);if(g||(m.value=s,e.value.name=""),c||(p.value=a,e.value.email=""),N||(f.value=E,e.value.password=""),M||(_.value=L,e.value.passwordConfirmation=""),d.value.length===0&&!m.value&&!f.value&&!p.value&&!_.value){const T={name:e.value.name,email:e.value.email,password:e.value.password,password_confirmation:e.value.passwordConfirmation,token:C};try{await D(T),w.value=!0,e.value.name="",e.value.email="",e.value.password="",e.value.passwordConfirmation=""}catch(B){B.response.status===401?(d.value.push("Please enter an valid email."),e.value.email=""):(d.value.push("Something went wrong, please try again later."),e.value.password="",e.value.passwordConfirmation="")}}}return(g,s)=>{const c=R("RouterLink");return r(),l(k,null,[t("img",{src:b(J),alt:"Ticker logo",class:"logo"},null,8,O),t("div",Q,[o(z,{title:"Sign up",shortDesc:"Start using Ticker for free."}),w.value?(r(),l("div",W,[X,o(c,{to:{name:"login"},class:"alert-link text-decoration-underline"},{default:y(()=>[Y]),_:1}),Z])):h("",!0),g.passwordResetSuccess?(r(),l("div",ee,[ae,o(c,{to:{name:"login"},class:"alert-link text-decoration-underline"},{default:y(()=>[se]),_:1}),oe])):h("",!0),d.value.length?(r(),l("div",re,[(r(!0),l(k,null,q(d.value,a=>(r(),l("div",{key:a},[o(j,{message:a,"hex-font-color":"ff0000"},null,8,["message"])]))),128))])):h("",!0),t("form",{onSubmit:$(x,["prevent"])},[t("div",te,[e.value.name?(r(),l("div",ie,[o(v,{type:"text",name:"name",label:"Full Name",modelValue:e.value.name,"onUpdate:modelValue":s[1]||(s[1]=a=>e.value.name=a),error:m.value,disabled:!0,"data-cy":"signUpName"},null,8,["modelValue","error"])])):(r(),l("div",ne,[o(v,{type:"text",name:"name",label:"Full Name",modelValue:e.value.name,"onUpdate:modelValue":s[0]||(s[0]=a=>e.value.name=a),error:m.value,disabled:!1,"data-cy":"signUpName"},null,8,["modelValue","error"])])),o(v,{type:"email",name:"email",label:"Email address",modelValue:e.value.email,"onUpdate:modelValue":s[2]||(s[2]=a=>e.value.email=a),error:p.value,"data-cy":"signUpEmail"},null,8,["modelValue","error"]),o(v,{type:"password",name:"password",label:"Password",modelValue:e.value.password,"onUpdate:modelValue":s[3]||(s[3]=a=>e.value.password=a),error:f.value,"data-cy":"signUpPassword"},null,8,["modelValue","error"]),o(v,{type:"password",name:"confirm-password",label:"Confirm password",modelValue:e.value.passwordConfirmation,"onUpdate:modelValue":s[4]||(s[4]=a=>e.value.passwordConfirmation=a),error:_.value,"data-cy":"signUpConfirmPassword"},null,8,["modelValue","error"])]),t("div",ue,[t("button",{type:"submit",class:"btn btn-primary text-white",disabled:b(U),"data-cy":"signUpSubmit"}," Sign up ",8,de)]),t("p",me,[ce,o(c,{to:{name:"login"},class:"text-secondary fw-normal"},{default:y(()=>[ve]),_:1})])],40,le)])],64)}}};export{Ve as default};
