import{r as i,f as A,s as j,o as l,c as r,a as n,u as t,b as o,w as b,h as P,F as C,g as D,i as z,j as x,e as m,l as G,v as H}from"./index.bff4561a.js";import{_ as c}from"./BaseAlert.vue_vue_type_style_index_0_lang.11a88c78.js";import{_ as I}from"./BaseFormHeading.6b12e78e.js";import{_ as J}from"./BaseAlert.38e43c22.js";import{v as K}from"./validateEmail.6be92a2d.js";import{v as O}from"./validatePassword.1dd98178.js";import{v as Q}from"./validateName.9f9d9069.js";import{_ as U}from"./PasswordToggle.47b6b6ed.js";import{l as W}from"./logo.f5257f33.js";function X(k,v){return v?k!==v?{isValid:!1,errorMessage:"Password did not match"}:{isValid:!0,errorMessage:""}:{isValid:!1,errorMessage:"Confirm Password is required."}}const Y=["src"],Z={class:"d-grid col-md-8 col-lg-5 mx-auto"},ee={key:0,class:"alert alert-success",role:"alert"},ae=m(" Signup successfully! "),se=m("Login"),oe=m(" to start using Ticker. "),le={key:1,class:"alert alert-success",role:"alert"},re=m(" Password reset successfully! "),te=m("Login"),ne=m(" to start using Ticker. "),ie={key:2},de=["onSubmit"],ue={class:"mb-3"},me={key:0},ve={key:1},pe={key:2},ce={key:3},fe={class:"input_form"},we={class:"input_form"},_e={class:"d-grid"},ge=["disabled"],ye={class:"mt-4"},he=m(" Already have an account? "),Ve=n("u",null,"Login",-1),Me={setup(k){const v=G(),E=v.params.token,S=v.query.email,N=v.query.name;let d=i(!1),u=i(!1);const e=i({name:N,email:S,password:"",passwordConfirmation:""}),f=i(""),w=i(""),g=i(""),y=i(""),p=i([]),h=i(!1),M=A(()=>e.value.name===""||e.value.email===""||e.value.password===""||e.value.passwordConfirmation==="");async function T(){p.value=[],f.value="",w.value="",g.value="",y.value="",h.value=!1;const{isValid:V,errorMessage:a}=Q(e.value.name),{isValid:_,errorMessage:s}=K(e.value.email),{isValid:L,errorMessage:$}=O(e.value.password),{isValid:R,errorMessage:B}=X(e.value.password,e.value.passwordConfirmation);if(V||(f.value=a,e.value.name=""),_||(w.value=s,e.value.email=""),L||(g.value=$,e.value.password=""),R||(y.value=B,e.value.passwordConfirmation=""),p.value.length===0&&!f.value&&!g.value&&!w.value&&!y.value){const F={name:e.value.name,email:e.value.email,password:e.value.password,password_confirmation:e.value.passwordConfirmation,token:E};try{await H(F),h.value=!0,e.value.name="",e.value.email="",e.value.password="",e.value.passwordConfirmation=""}catch(q){q.response.status===401?(p.value.push("Please enter an valid email."),e.value.email=""):(p.value.push("Something went wrong, please try again later."),e.value.password="",e.value.passwordConfirmation="")}}}return(V,a)=>{const _=j("RouterLink");return l(),r(C,null,[n("img",{src:t(W),alt:"Ticker logo",class:"logo"},null,8,Y),n("div",Z,[o(I,{title:"Sign up",shortDesc:"Start using Ticker for free."}),h.value?(l(),r("div",ee,[ae,o(_,{to:{name:"login"},class:"alert-link text-decoration-underline"},{default:b(()=>[se]),_:1}),oe])):P("",!0),V.passwordResetSuccess?(l(),r("div",le,[re,o(_,{to:{name:"login"},class:"alert-link text-decoration-underline"},{default:b(()=>[te]),_:1}),ne])):P("",!0),p.value.length?(l(),r("div",ie,[(l(!0),r(C,null,D(p.value,s=>(l(),r("div",{key:s},[o(J,{message:s,"hex-font-color":"ff0000"},null,8,["message"])]))),128))])):P("",!0),n("form",{onSubmit:z(T,["prevent"])},[n("div",ue,[e.value.name?(l(),r("div",ve,[o(c,{type:"text",name:"name",label:"Full Name",modelValue:e.value.name,"onUpdate:modelValue":a[1]||(a[1]=s=>e.value.name=s),error:f.value,disabled:!0,"data-cy":"signUpName"},null,8,["modelValue","error"])])):(l(),r("div",me,[o(c,{type:"text",name:"name",label:"Full Name",modelValue:e.value.name,"onUpdate:modelValue":a[0]||(a[0]=s=>e.value.name=s),error:f.value,disabled:!1,"data-cy":"signUpName"},null,8,["modelValue","error"])])),e.value.email?(l(),r("div",ce,[o(c,{type:"text",name:"email",label:"Email Address",modelValue:e.value.email,"onUpdate:modelValue":a[3]||(a[3]=s=>e.value.email=s),error:w.value,disabled:!0,"data-cy":"signUpEmail"},null,8,["modelValue","error"])])):(l(),r("div",pe,[o(c,{type:"text",name:"email",label:"Email Adress",modelValue:e.value.email,"onUpdate:modelValue":a[2]||(a[2]=s=>e.value.email=s),error:w.value,disabled:!1,"data-cy":"signUpEmail"},null,8,["modelValue","error"])])),n("div",fe,[o(c,{type:t(d)?"text":"password",name:"password",label:"Password",modelValue:e.value.password,"onUpdate:modelValue":a[4]||(a[4]=s=>e.value.password=s),error:g.value,"data-cy":"signUpPassword"},null,8,["type","modelValue","error"]),o(U,{showPassword:t(d),onTogglePassword:a[5]||(a[5]=s=>x(d)?d.value=!t(d):d=!t(d))},null,8,["showPassword"])]),n("div",we,[o(c,{type:t(u)?"text":"password",name:"confirm-password",label:"Confirm password",modelValue:e.value.passwordConfirmation,"onUpdate:modelValue":a[6]||(a[6]=s=>e.value.passwordConfirmation=s),error:y.value,"data-cy":"signUpConfirmPassword"},null,8,["type","modelValue","error"]),o(U,{showPassword:t(u),onTogglePassword:a[7]||(a[7]=s=>x(u)?u.value=!t(u):u=!t(u))},null,8,["showPassword"])])]),n("div",_e,[n("button",{type:"submit",class:"btn btn-primary text-white",disabled:t(M),"data-cy":"signUpSubmit"}," Sign up ",8,ge)]),n("p",ye,[he,o(_,{to:{name:"login"},class:"text-secondary fw-normal"},{default:b(()=>[Ve]),_:1})])],40,de)])],64)}}};export{Me as default};
