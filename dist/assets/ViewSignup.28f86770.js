import{r as i,f as F,s as R,o as l,c as r,a as t,u as b,b as o,w as y,h as V,F as k,g as q,i as A,e as n,l as $,v as D}from"./index.98eba871.js";import{_ as m}from"./BaseAlert.vue_vue_type_style_index_0_lang.68c3382f.js";import{_ as j}from"./BaseFormHeading.b81b1922.js";import{_ as z}from"./BaseAlert.b33af321.js";import{v as G}from"./validateEmail.6be92a2d.js";import{v as H}from"./validatePassword.1dd98178.js";import{v as I}from"./validateName.9f9d9069.js";import{l as J}from"./logo.f5257f33.js";function K(h,d){return d?h!==d?{isValid:!1,errorMessage:"Password did not match"}:{isValid:!0,errorMessage:""}:{isValid:!1,errorMessage:"Confirm Password is required."}}const O=["src"],Q={class:"d-grid col-md-8 col-lg-5 mx-auto"},W={key:0,class:"alert alert-success",role:"alert"},X=n(" Signup successfully! "),Y=n("Login"),Z=n(" to start using Ticker. "),ee={key:1,class:"alert alert-success",role:"alert"},ae=n(" Password reset successfully! "),se=n("Login"),oe=n(" to start using Ticker. "),le={key:2},re=["onSubmit"],te={class:"mb-3"},ie={key:0},ne={key:1},de={key:2},ue={key:3},me={class:"d-grid"},ve=["disabled"],ce={class:"mt-4"},pe=n(" Already have an account? "),fe=t("u",null,"Login",-1),Ce={setup(h){const d=$(),C=d.params.token,U=d.query.email,x=d.query.name,e=i({name:x,email:U,password:"",passwordConfirmation:""}),v=i(""),c=i(""),f=i(""),_=i(""),u=i([]),w=i(!1),P=F(()=>e.value.name===""||e.value.email===""||e.value.password===""||e.value.passwordConfirmation==="");async function E(){u.value=[],v.value="",c.value="",f.value="",_.value="",w.value=!1;const{isValid:g,errorMessage:s}=I(e.value.name),{isValid:p,errorMessage:a}=G(e.value.email),{isValid:S,errorMessage:N}=H(e.value.password),{isValid:M,errorMessage:L}=K(e.value.password,e.value.passwordConfirmation);if(g||(v.value=s,e.value.name=""),p||(c.value=a,e.value.email=""),S||(f.value=N,e.value.password=""),M||(_.value=L,e.value.passwordConfirmation=""),u.value.length===0&&!v.value&&!f.value&&!c.value&&!_.value){const T={name:e.value.name,email:e.value.email,password:e.value.password,password_confirmation:e.value.passwordConfirmation,token:C};try{await D(T),w.value=!0,e.value.name="",e.value.email="",e.value.password="",e.value.passwordConfirmation=""}catch(B){B.response.status===401?(u.value.push("Please enter an valid email."),e.value.email=""):(u.value.push("Something went wrong, please try again later."),e.value.password="",e.value.passwordConfirmation="")}}}return(g,s)=>{const p=R("RouterLink");return l(),r(k,null,[t("img",{src:b(J),alt:"Ticker logo",class:"logo"},null,8,O),t("div",Q,[o(j,{title:"Sign up",shortDesc:"Start using Ticker for free."}),w.value?(l(),r("div",W,[X,o(p,{to:{name:"login"},class:"alert-link text-decoration-underline"},{default:y(()=>[Y]),_:1}),Z])):V("",!0),g.passwordResetSuccess?(l(),r("div",ee,[ae,o(p,{to:{name:"login"},class:"alert-link text-decoration-underline"},{default:y(()=>[se]),_:1}),oe])):V("",!0),u.value.length?(l(),r("div",le,[(l(!0),r(k,null,q(u.value,a=>(l(),r("div",{key:a},[o(z,{message:a,"hex-font-color":"ff0000"},null,8,["message"])]))),128))])):V("",!0),t("form",{onSubmit:A(E,["prevent"])},[t("div",te,[e.value.name?(l(),r("div",ne,[o(m,{type:"text",name:"name",label:"Full Name",modelValue:e.value.name,"onUpdate:modelValue":s[1]||(s[1]=a=>e.value.name=a),error:v.value,disabled:!0,"data-cy":"signUpName"},null,8,["modelValue","error"])])):(l(),r("div",ie,[o(m,{type:"text",name:"name",label:"Full Name",modelValue:e.value.name,"onUpdate:modelValue":s[0]||(s[0]=a=>e.value.name=a),error:v.value,disabled:!1,"data-cy":"signUpName"},null,8,["modelValue","error"])])),e.value.email?(l(),r("div",ue,[o(m,{type:"text",name:"email",label:"Email Address",modelValue:e.value.email,"onUpdate:modelValue":s[3]||(s[3]=a=>e.value.email=a),error:c.value,disabled:!0,"data-cy":"signUpEmail"},null,8,["modelValue","error"])])):(l(),r("div",de,[o(m,{type:"text",name:"email",label:"Email Adress",modelValue:e.value.email,"onUpdate:modelValue":s[2]||(s[2]=a=>e.value.email=a),error:c.value,disabled:!1,"data-cy":"signUpEmail"},null,8,["modelValue","error"])])),o(m,{type:"password",name:"password",label:"Password",modelValue:e.value.password,"onUpdate:modelValue":s[4]||(s[4]=a=>e.value.password=a),error:f.value,"data-cy":"signUpPassword"},null,8,["modelValue","error"]),o(m,{type:"password",name:"confirm-password",label:"Confirm password",modelValue:e.value.passwordConfirmation,"onUpdate:modelValue":s[5]||(s[5]=a=>e.value.passwordConfirmation=a),error:_.value,"data-cy":"signUpConfirmPassword"},null,8,["modelValue","error"])]),t("div",me,[t("button",{type:"submit",class:"btn btn-primary text-white",disabled:b(P),"data-cy":"signUpSubmit"}," Sign up ",8,ve)]),t("p",ce,[pe,o(p,{to:{name:"login"},class:"text-secondary fw-normal"},{default:y(()=>[fe]),_:1})])],40,re)])],64)}}};export{Ce as default};
