import{r as u,o as l,c as n,a as s,u as m,b as i,F as c,g,h,i as w,w as y,R as k,e as x,k as b,x as V}from"./index.a82e036b.js";import{_ as E}from"./BaseFormHeading.95b25140.js";import{_ as R,a as N}from"./BaseAlert.a56e706f.js";import{v as S}from"./validateEmail.db033d63.js";import{l as T}from"./logo.5b10267d.js";const B=["src"],F={class:"d-grid col-md-8 col-lg-5 mx-auto"},P={key:0},$=["onSubmit"],C=s("div",{class:"d-grid"},[s("button",{class:"btn btn-primary mt-3 text-white","data-cy":"forgetPasswordResetButton"},"Get reset link")],-1),L={class:"mt-4"},M=x(" Never mind! "),D=s("u",null," Take me back to login",-1),z={setup(G){const a=u(""),o=u(""),t=u([]),_=b();async function f(){o.value="",t.value=[];const{isValid:d,errorMessage:r}=S(a.value);if(d||(o.value=r,a.value=""),o.value===""&&t.value.length===0)try{const e=await V(a.value),{status:p,statusText:v}=e;p===200&&v==="OK"&&_.push({name:"passwordResetSent"})}catch(e){e.response.status===404?t.value.push(e.response.data.message):t.value.push("Something went wrong, please try again later"),a.value=""}}return(d,r)=>(l(),n(c,null,[s("img",{src:m(T),alt:"Ticker logo",class:"logo"},null,8,B),s("div",F,[i(E,{title:"Reset password",shortDesc:"To reset your password, enter the email address you use to login."}),t.value.length?(l(),n("div",P,[(l(!0),n(c,null,g(t.value,e=>(l(),n("div",{key:e},[i(N,{message:e,"hex-font-color":"ff0000"},null,8,["message"])]))),128))])):h("",!0),s("form",{onSubmit:w(f,["prevent"])},[i(R,{type:"email",name:"email",label:"Email address",modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=e=>a.value=e),error:o.value,"data-cy":"forgetPasswordEmail"},null,8,["modelValue","error"]),C],40,$),s("p",L,[M,i(m(k),{to:{name:"login"},class:"text-secondary fw-normal"},{default:y(()=>[D]),_:1})])])],64))}};export{z as default};
