import{r as l,o as g,c as y,a as t,u as w,b as r,w as V,R as h,h as x,i as E,F as M,e as u,l as N,y as S}from"./index.2f13ce3f.js";import{_ as T}from"./BaseFormHeading.cabe1c1c.js";import{a as B,_ as f}from"./BaseAlert.1a8c03e9.js";import{v as U}from"./validateEmail.6be92a2d.js";import{v as $}from"./validatePassword.1dd98178.js";import{l as q}from"./logo.f5257f33.js";function F(m,v){const s={isValid:!0,errorMessage:""};return m===""?(s.isValid=!1,s.errorMessage="Confirm password field is required.",s):(m!==v&&(s.isValid=!1,s.errorMessage="Password and confirm password fields do not match."),s)}const L=["src"],j={class:"d-grid col-md-8 col-lg-5 mx-auto"},D={key:0,class:"alert alert-success",role:"alert"},z=u(" Password reset successfully! "),A=u("Login"),G=u(" to start using Ticker. "),H=["onSubmit"],I=t("div",{class:"d-grid"},[t("button",{type:"submit",class:"btn btn-primary text-white mt-3","data-cy":"passwordResetSubmit"}," Password reset ")],-1),J={class:"mt-4"},K=u(" Never mind! "),O=t("u",null," Take me back to login",-1),ae={setup(m){const s=N().query.token,e=l({email:"",password:"",passwordConfirmation:""}),i=l(""),n=l(""),d=l(""),c=l(""),p=l(!1);async function C(){i.value="",n.value="",d.value="",c.value="",p.value=!1;const{isValid:_,errorMessage:a}=U(e.value.email),{isValid:o,errorMessage:b}=$(e.value.password),{isValid:k,errorMessage:R}=F(e.value.passwordConfirmation,e.value.password);if(_||(i.value=a,e.value.email=""),o||(n.value=b,e.value.password=""),k||(d.value=R,e.value.passwordConfirmation=""),i.value===""&n.value===""&&d.value===""){const P={email:e.value.email,password:e.value.password,password_confirmation:e.value.passwordConfirmation,token:s};try{await S(P),p.value=!0,e.value.email="",e.value.password="",e.value.passwordConfirmation=""}catch{c.value="Something went wrong, please try again later."}}}return(_,a)=>(g(),y(M,null,[t("img",{src:w(q),alt:"Ticker logo",class:"logo"},null,8,L),t("div",j,[r(T,{title:"Password Reset",shortDesc:"Reset password to restart your journey with Ticker."}),p.value?(g(),y("div",D,[z,r(w(h),{to:{name:"login"},class:"alert-link text-decoration-underline"},{default:V(()=>[A]),_:1}),G])):x("",!0),r(B,{message:c.value,"hex-font-color":"ff0000"},null,8,["message"]),t("form",{onSubmit:E(C,["prevent"])},[r(f,{type:"email",name:"email",label:"Email address",modelValue:e.value.email,"onUpdate:modelValue":a[0]||(a[0]=o=>e.value.email=o),error:i.value,"data-cy":"passwordResetEmail"},null,8,["modelValue","error"]),r(f,{type:"password",name:"password",label:"New password",modelValue:e.value.password,"onUpdate:modelValue":a[1]||(a[1]=o=>e.value.password=o),error:n.value,"data-cy":"passwordResetPassword"},null,8,["modelValue","error"]),r(f,{type:"password",name:"password-confirmation",label:"Confirm password",modelValue:e.value.passwordConfirmation,"onUpdate:modelValue":a[2]||(a[2]=o=>e.value.passwordConfirmation=o),error:d.value,"data-cy":"passwordResetConfirmation"},null,8,["modelValue","error"]),I,t("p",J,[K,r(w(h),{to:{name:"login"},class:"text-secondary fw-normal"},{default:V(()=>[O]),_:1})])],40,H)])],64))}};export{ae as default};
