import{J as oe,K as ne,L as re,M as ie,N as le,O as ce,P as de,Q as ue,S as me,j as pe,T as he,U as ve,V as fe,W as _e,X as be,Y as ge,r as S,Z as Te,_ as ye,$ as we,a0 as Ce,a1 as Se,a2 as Re,a3 as ke,a4 as xe,u as N,a5 as Ee,a6 as Be,n as G,a7 as Me,q as Oe,t as x,a8 as Ae,a9 as De,aa as $e,F as P,ab as Pe,ac as je,ad as Ne,ae as Ve,af as He,ag as Le,ah as Ie,ai as Ue,aj as Fe,f as ze,z as Ke,h as E,c as T,a as e,ak as qe,al as Ge,am as We,an as Qe,ao as Ye,e as Je,b as D,ap as Xe,aq as Ze,ar as et,as as tt,at as st,au as at,av as ot,aw as nt,ax as rt,ay as it,az as lt,aA as ct,aB as dt,aC as ut,aD as mt,aE as pt,aF as ht,aG as vt,aH as ft,aI as _t,aJ as W,aK as bt,aL as gt,aM as Tt,aN as yt,aO as wt,aP as Ct,aQ as St,aR as Rt,aS as kt,aT as xt,o as y,d as F,aU as Et,p as z,aV as Bt,aW as Mt,g as K,aX as Ot,s as At,aY as Dt,aZ as $t,a_ as Pt,a$ as jt,b0 as Nt,b1 as Vt,b2 as Ht,b3 as Lt,b4 as It,b5 as Ut,b6 as Ft,b7 as zt,b8 as Kt,b9 as qt,ba as Gt,bb as Wt,bc as Qt,bd as Q,be as Yt,bf as Jt,bg as Xt,bh as Zt,w as es,bi as ts,B,bj as ss,bk as as,bl as os,bm as ns,bn as rs,bo as is,bp as ls,bq as cs,br as ds,bs as us,bt as ms,bu as ps,bv as hs,bw as vs,bx as fs,by as _s,I as bs,C as Y,G as $,bz as gs,bA as Ts,i as J,A as V,bB as ys,bC as ws,E as X,D as Z,H as Cs}from"./index.a82e036b.js";import{T as Ss,_ as Rs}from"./BaseHeading.c9ef6667.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";import{p as ks}from"./index.61e869f6.js";import"./logo.5b10267d.js";const xs=()=>{};var Es=Object.freeze(Object.defineProperty({__proto__:null,compile:xs,EffectScope:oe,ReactiveEffect:ne,customRef:re,effect:ie,effectScope:le,getCurrentScope:ce,isProxy:de,isReactive:ue,isReadonly:me,isRef:pe,isShallow:he,markRaw:ve,onScopeDispose:fe,proxyRefs:_e,reactive:be,readonly:ge,ref:S,shallowReactive:Te,shallowReadonly:ye,shallowRef:we,stop:Ce,toRaw:Se,toRef:Re,toRefs:ke,triggerRef:xe,unref:N,camelize:Ee,capitalize:Be,normalizeClass:G,normalizeProps:Me,normalizeStyle:Oe,toDisplayString:x,toHandlerKey:Ae,BaseTransition:De,Comment:$e,Fragment:P,KeepAlive:Pe,Static:je,Suspense:Ne,Teleport:Ve,Text:He,callWithAsyncErrorHandling:Le,callWithErrorHandling:Ie,cloneVNode:Ue,compatUtils:Fe,computed:ze,createBlock:Ke,createCommentVNode:E,createElementBlock:T,createElementVNode:e,createHydrationRenderer:qe,createPropsRestProxy:Ge,createRenderer:We,createSlots:Qe,createStaticVNode:Ye,createTextVNode:Je,createVNode:D,defineAsyncComponent:Xe,defineComponent:Ze,defineEmits:et,defineExpose:tt,defineProps:st,get devtools(){return at},getCurrentInstance:ot,getTransitionRawChildren:nt,guardReactiveProps:rt,h:it,handleError:lt,initCustomFormatter:ct,inject:dt,isMemoSame:ut,isRuntimeOnly:mt,isVNode:pt,mergeDefaults:ht,mergeProps:vt,nextTick:ft,onActivated:_t,onBeforeMount:W,onBeforeUnmount:bt,onBeforeUpdate:gt,onDeactivated:Tt,onErrorCaptured:yt,onMounted:wt,onRenderTracked:Ct,onRenderTriggered:St,onServerPrefetch:Rt,onUnmounted:kt,onUpdated:xt,openBlock:y,popScopeId:F,provide:Et,pushScopeId:z,queuePostFlushCb:Bt,registerRuntimeCompiler:Mt,renderList:K,renderSlot:Ot,resolveComponent:At,resolveDirective:Dt,resolveDynamicComponent:$t,resolveFilter:Pt,resolveTransitionHooks:jt,setBlockTracking:Nt,setDevtoolsHook:Vt,setTransitionHooks:Ht,ssrContextKey:Lt,ssrUtils:It,toHandlers:Ut,transformVNodeArgs:Ft,useAttrs:zt,useSSRContext:Kt,useSlots:qt,useTransitionState:Gt,version:Wt,warn:Qt,watch:Q,watchEffect:Yt,watchPostEffect:Jt,watchSyncEffect:Xt,withAsyncContext:Zt,withCtx:es,withDefaults:ts,withDirectives:B,withMemo:ss,withScopeId:as,Transition:os,TransitionGroup:ns,VueElement:rs,createApp:is,createSSRApp:ls,defineCustomElement:cs,defineSSRCustomElement:ds,hydrate:us,initDirectivesForSSR:ms,render:ps,useCssModule:hs,useCssVars:vs,vModelCheckbox:fs,vModelDynamic:_s,vModelRadio:bs,vModelSelect:Y,vModelText:$,vShow:gs,withKeys:Ts,withModifiers:J},Symbol.toStringTag,{value:"Module"}));const H="/api/log",Bs=H,Ms=H,Os=H,As=H;var L={TRACKER_ADD:Bs,TRACKER_EDIT:Ms,TRACKER_LIST:Os,TRACKER_DELETE:As};const Ds=async(n,i)=>await V.post(L.TRACKER_ADD,n,{headers:{Authorization:i}}),te=async(n,i,o)=>await V.patch(`${L.TRACKER_EDIT}/${o}`,n,{headers:{Authorization:i}}),$s=async(n,i)=>await V.get(`${L.TRACKER_LIST}/${i}`,{headers:{authorization:n}}),Ps=async(n,i)=>await V.delete(`${L.TRACKER_DELETE}/${i}`,{headers:{authorization:n}});function js(n){return n.sort((i,o)=>new Date(o.end_time)-new Date(i.end_time)),n}function U(n){return n.toString().padStart(2,"0")}function Ns(n){let i=Math.floor(n/1e3),o=Math.floor(i/60),c=Math.floor(o/60);return i=i%60,o=i>=30?o+1:o,o=o%60,c=c%24,`${U(c)}:${U(o)}:${U(i)}`}function Vs(n,i){const o=new Date(i)-new Date(n);return new Date(o)}var se={exports:{}},Hs=ys(Es);(function(n,i){(function(o,c){n.exports=c(Hs)})(ws,o=>(()=>{var c={831:(a,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.default=(_,p)=>{const C=_.__vccOpts||_;for(const[l,u]of p)C[l]=u;return C}},976:a=>{a.exports=o}},v={};function d(a){var f=v[a];if(f!==void 0)return f.exports;var _=v[a]={exports:{}};return c[a](_,_.exports,d),_.exports}d.d=(a,f)=>{for(var _ in f)d.o(f,_)&&!d.o(a,_)&&Object.defineProperty(a,_,{enumerable:!0,get:f[_]})},d.o=(a,f)=>Object.prototype.hasOwnProperty.call(a,f),d.r=a=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var w={};return(()=>{d.r(w),d.d(w,{ToastComponent:()=>m,ToastPlugin:()=>g,ToastPositions:()=>u,default:()=>O,useToast:()=>b});var a=d(976);const f=(0,a.createElementVNode)("div",{class:"v-toast__icon"},null,-1),_=["innerHTML"];function p(t){var s;t.remove!==void 0?t.remove():(s=t.parentNode)===null||s===void 0||s.removeChild(t)}function C(t,s,r){let R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const A=(0,a.h)(t,s,R),j=document.createElement("div");return j.classList.add("v-toast--pending"),r.appendChild(j),(0,a.render)(A,j),A.component}class l{constructor(s,r){this.startedAt=Date.now(),this.callback=s,this.delay=r,this.timer=setTimeout(s,r)}pause(){this.stop(),this.delay-=Date.now()-this.startedAt}resume(){this.stop(),this.startedAt=Date.now(),this.timer=setTimeout(this.callback,this.delay)}stop(){clearTimeout(this.timer)}}const u=Object.freeze({TOP_RIGHT:"top-right",TOP:"top",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left"});var h;const k={all:h=h||new Map,on:function(t,s){var r=h.get(t);r?r.push(s):h.set(t,[s])},off:function(t,s){var r=h.get(t);r&&(s?r.splice(r.indexOf(s)>>>0,1):h.set(t,[]))},emit:function(t,s){var r=h.get(t);r&&r.slice().map(function(R){R(s)}),(r=h.get("*"))&&r.slice().map(function(R){R(t,s)})}},M=(0,a.defineComponent)({name:"Toast",props:{message:{type:String,required:!0},type:{type:String,default:"success"},position:{type:String,default:u.BOTTOM_RIGHT,validator:t=>Object.values(u).includes(t)},duration:{type:Number,default:3e3},dismissible:{type:Boolean,default:!0},onDismiss:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},queue:Boolean,pauseOnHover:{type:Boolean,default:!0}},data:()=>({isActive:!1,parentTop:null,parentBottom:null,isHovered:!1}),beforeMount(){this.setupContainer()},mounted(){this.showNotice(),k.on("toast-clear",this.dismiss)},methods:{setupContainer(){if(this.parentTop=document.querySelector(".v-toast.v-toast--top"),this.parentBottom=document.querySelector(".v-toast.v-toast--bottom"),this.parentTop&&this.parentBottom)return;this.parentTop||(this.parentTop=document.createElement("div"),this.parentTop.className="v-toast v-toast--top"),this.parentBottom||(this.parentBottom=document.createElement("div"),this.parentBottom.className="v-toast v-toast--bottom");const t=document.body;t.appendChild(this.parentTop),t.appendChild(this.parentBottom)},shouldQueue(){return!!this.queue&&(this.parentTop.childElementCount>0||this.parentBottom.childElementCount>0)},dismiss(){this.timer&&this.timer.stop(),clearTimeout(this.queueTimer),this.isActive=!1,setTimeout(()=>{this.onDismiss.apply(null,arguments);const t=this.$refs.root;(0,a.render)(null,t),p(t)},150)},showNotice(){if(this.shouldQueue())return void(this.queueTimer=setTimeout(this.showNotice,250));const t=this.$refs.root.parentElement;this.correctParent.insertAdjacentElement("afterbegin",this.$refs.root),p(t),this.isActive=!0,this.duration&&(this.timer=new l(this.dismiss,this.duration))},whenClicked(){this.dismissible&&(this.onClick.apply(null,arguments),this.dismiss())},toggleTimer(t){this.pauseOnHover&&this.timer&&(t?this.timer.pause():this.timer.resume())}},computed:{correctParent(){switch(this.position){case u.TOP:case u.TOP_RIGHT:case u.TOP_LEFT:return this.parentTop;case u.BOTTOM:case u.BOTTOM_RIGHT:case u.BOTTOM_LEFT:return this.parentBottom}},transition(){switch(this.position){case u.TOP:case u.TOP_RIGHT:case u.TOP_LEFT:return{enter:"v-toast--fade-in-down",leave:"v-toast--fade-out"};case u.BOTTOM:case u.BOTTOM_RIGHT:case u.BOTTOM_LEFT:return{enter:"v-toast--fade-in-up",leave:"v-toast--fade-out"}}}},beforeUnmount(){k.off("toast-clear",this.dismiss)}}),m=(0,d(831).default)(M,[["render",function(t,s,r,R,A,j){return(0,a.openBlock)(),(0,a.createBlock)(a.Transition,{"enter-active-class":t.transition.enter,"leave-active-class":t.transition.leave},{default:(0,a.withCtx)(()=>[(0,a.withDirectives)((0,a.createElementVNode)("div",{ref:"root",role:"alert",class:(0,a.normalizeClass)(["v-toast__item",["v-toast__item--".concat(t.type),"v-toast__item--".concat(t.position)]]),onMouseover:s[0]||(s[0]=ae=>t.toggleTimer(!0)),onMouseleave:s[1]||(s[1]=ae=>t.toggleTimer(!1)),onClick:s[2]||(s[2]=function(){return t.whenClicked&&t.whenClicked(...arguments)})},[f,(0,a.createElementVNode)("p",{class:"v-toast__text",innerHTML:t.message},null,8,_)],34),[[a.vShow,t.isActive]])]),_:1},8,["enter-active-class","leave-active-class"])}]]),b=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{open(s){let r=null;typeof s=="string"&&(r=s);const R={message:r},A=Object.assign({},R,t,s);return{dismiss:C(m,A,document.body).ctx.dismiss}},clear(){k.emit("toast-clear")},success(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:s,type:"success"},r))},error(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:s,type:"error"},r))},info(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:s,type:"info"},r))},warning(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:s,type:"warning"},r))},default(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.open(Object.assign({},{message:s,type:"default"},r))}}},g={install:function(t){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=b(s);t.config.globalProperties.$toast=r,t.provide("$toast",r)}},O=g})(),w})())})(se);const I=n=>(z("data-v-4d5b5247"),n=n(),F(),n),Ls={key:0,class:"mt-5 border border-bottom-0 rounded"},Is={class:"table table-hover"},Us=I(()=>e("thead",{class:"text-primary"},[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col"},"Activity Name"),e("th",{scope:"col"},"Project Id"),e("th",{scope:"col"},"Billability"),e("th",{scope:"col"},"Start Time"),e("th",{scope:"col"},"End Time"),e("th",{scope:"col"},"Action"),e("th",{scope:"col"},"Total Time"),e("th",{scope:"col"})])],-1)),Fs={key:0},zs=["textContent"],Ks=["onUpdate:modelValue"],qs=["textContent"],Gs=["textContent"],Ws={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Qs=["onClick"],Ys=["onClick"],Js=["onUpdate:modelValue"],Xs=["onUpdate:modelValue"],Zs=["onClick"],ea=I(()=>e("button",{type:"button",class:"btn btn-light btn-sm mx-2","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"}," Delete ",-1)),ta={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},sa={class:"modal-dialog modal-dialog-centered"},aa={class:"modal-content"},oa=I(()=>e("div",{class:"modal-header text-center border-0"},[e("h5",{class:"modal-title w-100",id:"staticBackdropLabel"},"Are you sure you want to delete?")],-1)),na={class:"modal-footer pull-right justify-content-center border-0"},ra=I(()=>e("button",{type:"button",class:"btn btn-secondary-outline","data-bs-dismiss":"modal"},"Cancel",-1)),ia=["onClick"],la={key:1,class:"mt-5 text-danger mx-1"},ca={key:0},da={key:2},ua={setup(n){const i=X(),o=S([]),c=S(!0),v=Z().user.id,d=se.exports.useToast();async function w(){try{const p=await $s(i,v);p.status===200&&p.data.logs&&(o.value=p.data.logs,js(o.value)),c.value=!1}catch{alert("Something went wrong, please try again later")}}w();async function a(p,C,l,u,h,k,M){try{var m={activity_name:p,user_id:C,project_id:l,billable:u,start_time:h,end_time:k};(await te(m,i,M)).status==200&&(w(),alert("Time Log Updated Successfully"))}catch{alert("Error: unable to edit the time log.")}}async function f(p){try{(await Ps(i,p)).status===200&&(w(),d.success("Congratulations! Your Timelog deleted successfully."),o.value.length===1&&location.reload())}catch{d.error("Unable to delete your Timelog.")}}function _(p){return p==!0?"Billable":"Non Billable"}return(p,C)=>(y(),T(P,null,[o.value.length?(y(),T("div",Ls,[e("table",Is,[Us,o.value.length?(y(),T("tbody",Fs,[(y(!0),T(P,null,K(o.value,(l,u)=>(y(),T("tr",{key:l.id},[e("th",{scope:"row",class:"align-middle",textContent:x(u+1)},null,8,zs),e("td",null,[B(e("input",{class:"edit",type:"text","onUpdate:modelValue":h=>l.activity_name=h},null,8,Ks),[[$,l.activity_name]])]),e("td",null,[e("div",{textContent:x(l.project_id)},null,8,qs)]),e("td",null,[e("button",{class:"btn btn-light btn-sm",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown",textContent:x(_(l.billable)),"aria-expanded":"true"},null,8,Gs),e("ul",Ws,[e("li",null,[e("a",{class:"dropdown-item",onClick:()=>l.billable=!0}," Billable ",8,Qs)]),e("li",null,[e("a",{class:"dropdown-item",onClick:()=>l.billable=!1}," Non Billable ",8,Ys)])])]),e("td",null,[B(e("input",{class:"edit",type:"text","onUpdate:modelValue":h=>l.start_time=h},null,8,Js),[[$,l.start_time]])]),e("td",null,[B(e("input",{class:"edit",type:"text","onUpdate:modelValue":h=>l.end_time=h},null,8,Xs),[[$,l.end_time]])]),e("td",null,[e("button",{onClick:h=>a(l.activity_name,N(v),l.project_id,l.billable,l.start_time,l.end_time,l.id),class:"btn btn-light btn-sm"}," Edit ",8,Zs),ea,e("div",ta,[e("div",sa,[e("div",aa,[oa,e("div",na,[ra,e("button",{type:"button",class:"btn btn-primary-outline text-primary",onClick:h=>f(l.id),"data-bs-dismiss":"modal"},"Delete",8,ia)])])])])]),e("td",null,x(N(Ns)(N(Vs)(l.start_time,l.end_time))),1)]))),128))])):E("",!0)])])):(y(),T("p",la,[c.value?E("",!0):(y(),T("span",ca,"No time logs. Let's start tracking"))])),c.value?(y(),T("p",da,"Loading...")):E("",!0)],64))}};var ma=ee(ua,[["__scopeId","data-v-4d5b5247"]]);function q(){const n=new Date,i=n.getFullYear();let o=n.getMonth()+1,c=n.getDate(),v=n.getHours(),d=n.getMinutes(),w=n.getSeconds();return o=o<10?`0${o}`:o,c=c<10?`0${c}`:c,v=v<10?`0${v}`:v,d=d<10?`0${d}`:d,w=w<10?`0${w}`:w,`${i}-${o}-${c} ${v}:${d}:${w}`}const pa=n=>(z("data-v-218cb1c9"),n=n(),F(),n),ha={class:"tracker px-3 py-2 border rounded shadow-sm"},va=["onSubmit"],fa=pa(()=>e("label",{for:"project",class:"px-3"},"Projects",-1)),_a=["value","textContent"],ba={key:1,class:"text-danger"},ga=["title"],Ta=["textContent"],ya={key:3,type:"submit",class:"btn btn-secondary mb-2 mx-4 mt-2"},wa={setup(n){const i=S(""),o=S(null),c=S([]),v=S(!1),d=S(!0),w=S(!1),a=S(null),f=S("00:00:00"),_=X();let p=0,C=null;function l(){p++;let m=Math.floor(p/3600),b=Math.floor((p-m*3600)/60),g=p%60;g<10&&(g="0"+g),b<10&&(b="0"+b),m<10&&(m="0"+m),f.value=`${m}:${b}:${g}`}function u(){C||(C=setInterval(l,1e3))}function h(){clearInterval(C),C=null}W(async()=>{try{const m=await ks(_);m.status===200&&(c.value=m.data.users)}catch{alert("Something went wrong, please try again later")}}),Q(o,()=>{c.value.forEach(m=>{m.id===o.value&&(v.value=m.billable)})});async function k(){const m=q(),b=Z().user.id,g={activity_name:i.value,user_id:b,project_id:o.value,billable:v.value,start_time:m};try{const O=await Ds(g,_);O.status===200&&(d.value=!1,w.value=!0,u(),a.value=O.data.log)}catch{alert("Something went wrong, please try again later")}}async function M(){try{const m={activity_name:a.value.activity_name,user_id:a.value.user_id,project_id:a.value.project_id,billable:a.value.billable,start_time:a.value.start_time,end_time:q()};(await te(m,_,a.value.id)).status===200&&(w.value=!1,d.value=!0,i.value="",o.value="",v.value=!1,h(),alert("Time log added successfully"),location.reload())}catch{alert("Something went wrong, please try again later")}}return(m,b)=>(y(),T("div",ha,[e("form",{onSubmit:J(k,["prevent"]),class:""},[B(e("input",{type:"text",class:"form-control",id:"description","aria-describedby":"description",placeholder:"What are you working on?","onUpdate:modelValue":b[0]||(b[0]=g=>i.value=g),required:""},null,512),[[$,i.value]]),fa,c.value.length?B((y(),T("select",{key:0,id:"project",class:"form-select","onUpdate:modelValue":b[1]||(b[1]=g=>o.value=g),"aria-label":"projects",required:""},[(y(!0),T(P,null,K(c.value,g=>(y(),T("option",{key:g.id,value:g.id,textContent:x(g.project_name)},null,8,_a))),128))],512)),[[Y,o.value]]):(y(),T("span",ba," No projects. ")),e("span",{class:G(["dollar px-3 py-3",{"text-primary":v.value}]),title:v.value?"Billable":"Non billable",onClick:b[2]||(b[2]=g=>v.value=!v.value)}," $ ",10,ga),f.value?(y(),T("span",{key:2,class:"fw-bold",textContent:x(f.value)},null,8,Ta)):E("",!0),d.value?(y(),T("button",ya," START ")):E("",!0),w.value?(y(),T("a",{key:4,onClick:M,class:"btn btn-primary text-white mb-2 mx-4 mt-2"}," STOP ")):E("",!0)],40,va)]))}};var Ca=ee(wa,[["__scopeId","data-v-218cb1c9"]]);const Ba={setup(n){const i=Cs();return i.userStatus=!1,(o,c)=>(y(),T(P,null,[D(Ss),e("main",null,[D(Rs,{title:"Time Tracker"}),D(Ca),D(ma)])],64))}};export{Ba as default};
