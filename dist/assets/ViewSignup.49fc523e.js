import{r as l,f as R,s as q,o as u,c as d,a as r,u as C,b as o,w as h,h as y,F as b,g as F,i as $,e as t,l as A,v as D}from"./index.2f13ce3f.js";import{_ as w,a as j}from"./BaseAlert.1a8c03e9.js";import{_ as z}from"./BaseFormHeading.cabe1c1c.js";import{v as G}from"./validateEmail.6be92a2d.js";import{v as H}from"./validatePassword.1dd98178.js";import{v as I}from"./validateName.9f9d9069.js";import{l as J}from"./logo.f5257f33.js";function K(V,n){return n?V!==n?{isValid:!1,errorMessage:"Password did not match"}:{isValid:!0,errorMessage:""}:{isValid:!1,errorMessage:"Confirm Password is required."}}const O=["src"],Q={class:"d-grid col-md-8 col-lg-5 mx-auto"},W={key:0,class:"alert alert-success",role:"alert"},X=t(" Signup successfully! "),Y=t("Login"),Z=t(" to start using Ticker. "),ee={key:1,class:"alert alert-success",role:"alert"},ae=t(" Password reset successfully! "),se=t("Login"),oe=t(" to start using Ticker. "),re={key:2},le=["onSubmit"],te={class:"mb-3"},ne={class:"d-grid"},ie=["disabled"],ue={class:"mt-4"},de=t(" Already have an account? "),me=r("u",null,"Login",-1),he={setup(V){const n=A(),k=n.params.token,P=n.query.email,S=n.query.name,e=l({name:S,email:P,password:"",passwordConfirmation:""}),c=l(""),v=l(""),p=l(""),f=l(""),i=l([]),_=l(!1),x=R(()=>e.value.name===""||e.value.email===""||e.value.password===""||e.value.passwordConfirmation==="");async function E(){i.value=[],c.value="",v.value="",p.value="",f.value="",_.value=!1;const{isValid:g,errorMessage:s}=I(e.value.name),{isValid:m,errorMessage:a}=G(e.value.email),{isValid:U,errorMessage:N}=H(e.value.password),{isValid:M,errorMessage:L}=K(e.value.password,e.value.passwordConfirmation);if(g||(c.value=s,e.value.name=""),m||(v.value=a,e.value.email=""),U||(p.value=N,e.value.password=""),M||(f.value=L,e.value.passwordConfirmation=""),i.value.length===0&&!c.value&&!p.value&&!v.value&&!f.value){const T={name:e.value.name,email:e.value.email,password:e.value.password,password_confirmation:e.value.passwordConfirmation,token:k};try{await D(T),_.value=!0,e.value.name="",e.value.email="",e.value.password="",e.value.passwordConfirmation=""}catch(B){B.response.status===401?(i.value.push("Please enter an valid email."),e.value.email=""):(i.value.push("Something went wrong, please try again later."),e.value.password="",e.value.passwordConfirmation="")}}}return(g,s)=>{const m=q("RouterLink");return u(),d(b,null,[r("img",{src:C(J),alt:"Ticker logo",class:"logo"},null,8,O),r("div",Q,[o(z,{title:"Sign up",shortDesc:"Start using Ticker for free."}),_.value?(u(),d("div",W,[X,o(m,{to:{name:"login"},class:"alert-link text-decoration-underline"},{default:h(()=>[Y]),_:1}),Z])):y("",!0),g.passwordResetSuccess?(u(),d("div",ee,[ae,o(m,{to:{name:"login"},class:"alert-link text-decoration-underline"},{default:h(()=>[se]),_:1}),oe])):y("",!0),i.value.length?(u(),d("div",re,[(u(!0),d(b,null,F(i.value,a=>(u(),d("div",{key:a},[o(j,{message:a,"hex-font-color":"ff0000"},null,8,["message"])]))),128))])):y("",!0),r("form",{onSubmit:$(E,["prevent"])},[r("div",te,[o(w,{type:"text",name:"name",label:"Full Name",modelValue:e.value.name,"onUpdate:modelValue":s[0]||(s[0]=a=>e.value.name=a),error:c.value,"data-cy":"signUpName"},null,8,["modelValue","error"]),o(w,{type:"email",name:"email",label:"Email address",modelValue:e.value.email,"onUpdate:modelValue":s[1]||(s[1]=a=>e.value.email=a),error:v.value,"data-cy":"signUpEmail"},null,8,["modelValue","error"]),o(w,{type:"password",name:"password",label:"Password",modelValue:e.value.password,"onUpdate:modelValue":s[2]||(s[2]=a=>e.value.password=a),error:p.value,"data-cy":"signUpPassword"},null,8,["modelValue","error"]),o(w,{type:"password",name:"confirm-password",label:"Confirm password",modelValue:e.value.passwordConfirmation,"onUpdate:modelValue":s[3]||(s[3]=a=>e.value.passwordConfirmation=a),error:f.value,"data-cy":"signUpConfirmPassword"},null,8,["modelValue","error"])]),r("div",ne,[r("button",{type:"submit",class:"btn btn-primary text-white",disabled:C(x),"data-cy":"signUpSubmit"}," Sign up ",8,ie)]),r("p",ue,[de,o(m,{to:{name:"login"},class:"text-secondary fw-normal"},{default:h(()=>[me]),_:1})])],40,le)])],64)}}};export{he as default};
