import{A as E,r as u,o as r,c,a as e,z as B,h as g,F as w,g as M,b as y,i as z,B as A,C as D,t as _,e as L,D as O,E as R,G,p as F,d as K,H as q}from"./index.78431aa5.js";import{v as H}from"./validateName.6ce7ed4b.js";import{v as P}from"./validateEmail.db033d63.js";import{a as I,_ as T}from"./BaseAlert.f7416da1.js";import{_ as W}from"./plugin-vue_export-helper.21dcd24c.js";import{T as J,_ as Q}from"./BaseHeading.35cbd45c.js";import"./logo.5b10267d.js";const X="/api/all-roles",Y="/api/admin/invited",Z="/api/invite/invited-users",j="/api/invite/resend",ee="/api/invite/revoke/",te="/api/admin/users",se="/api/admin/user/",ae="/api/admin/user-status";var x={ALL_ROLES_URL:X,INVITE_MEMBER_URL:Y,INVITED_MEMBERS_LIST_URL:Z,REINVITE_URL:j,REINVOKE_URL:ee,REGISTER_USER_LIST_URL:te,DELETE_USER_URL:se,ENABLE_USER_URL:ae};const V=async()=>await E.get(x.ALL_ROLES_URL),oe=async(n,a)=>await E.post(x.INVITE_MEMBER_URL,n,{headers:{Authorization:a}}),ne=async n=>await E.get(x.INVITED_MEMBERS_LIST_URL,{headers:{Authorization:n}}),le=async(n,a)=>await E.post(x.REINVITE_URL,a,{headers:{Authorization:n}}),re=async(n,a)=>await E.get(x.REINVOKE_URL+a,{headers:{Authorization:n}}),ie=async n=>await E.get(x.REGISTER_USER_LIST_URL,{headers:{Authorization:n}}),ce=async(n,a)=>await E.post(`${x.DELETE_USER_URL}/${a}`,{},{headers:{Authorization:n}}),ue=async(n,a)=>await E.post(`${x.ENABLE_USER_URL}/${a}`,{},{headers:{Authorization:n}});const de=e("button",{type:"button",class:"btn btn-sm btn-primary text-white","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Add New Member ",-1),_e={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ve={class:"modal-dialog"},he={class:"modal-content"},me=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"exampleModalLabel"},"Add New Member"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),pe={class:"modal-body"},be={key:1},ge=["onSubmit"],fe={class:"mt-4"},ye=e("label",{for:"roles"},[L("Roles "),e("span",{class:"text-danger"},"*")],-1),we=["value","textContent"],Ee=["textContent"],xe=e("div",{class:"mt-4 mb-2"},[e("button",{type:"submit",class:"btn btn-primary text-white"}," Send Invite ")],-1),$e={setup(n){const a=u(""),i=u(""),m=u(""),h=u(""),v=u(""),b=u(""),f=u(!1),$=u([]),p=u([]);async function C(){try{const l=await V();$.value=l.data.UserRoles}catch{p.value.push("Something went wrong, please try again later.")}}C();async function d(){h.value="",v.value="",b.value="",p.value=[],f.value=!1;const{isValid:l,errorMessage:t}=H(a.value),{isValid:s,errorMessage:o}=P(i.value);if(l||(h.value=t,a.value=""),s||(v.value=o,i.value=""),h.value===""&&v.value===""&&p.value.length===0)try{const{user:{id:k}}=O(),S={name:a.value,email:i.value,role_id:m.value,user_id:k},N=R();(await oe(S,N)).status===200&&(f.value=!0,setTimeout(()=>{f.value=!1},3e3),location.reload(),a.value="",i.value="",m.value="")}catch{p.value.push("Something went wrong, please try again later.")}}return(l,t)=>(r(),c(w,null,[de,e("div",_e,[e("div",ve,[e("div",he,[me,e("div",pe,[f.value?(r(),B(I,{key:0,message:"Invite send successfully!","hex-font-color":"198754"})):g("",!0),p.value.length?(r(),c("div",be,[(r(!0),c(w,null,M(p.value,s=>(r(),c("div",{key:s},[y(I,{message:s,"hex-font-color":"ff0000"},null,8,["message"])]))),128))])):g("",!0),e("form",{onSubmit:z(d,["prevent"])},[y(T,{type:"text",name:"name",label:"Full name",modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value=s),error:h.value},null,8,["modelValue","error"]),y(T,{type:"email",name:"email",label:"Email address",modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=s=>i.value=s),error:v.value},null,8,["modelValue","error"]),e("div",fe,[ye,$.value.length?A((r(),c("select",{key:0,class:"form-select mt-2","aria-label":"roles select menu","onUpdate:modelValue":t[2]||(t[2]=s=>m.value=s),required:""},[(r(!0),c(w,null,M($.value,s=>(r(),c("option",{key:s.id,value:s.id,textContent:_(`${s.role.toUpperCase()}`)},null,8,we))),128))],512)),[[D,m.value]]):g("",!0),b.value?(r(),c("div",{key:1,class:"form-text text-danger",textContent:_(b.value)},null,8,Ee)):g("",!0)]),xe],40,ge)])])])])],64))}},Ce={class:"mt-2 fs-5"},Re=L(" Invited Members "),Le=["textContent"],Ue={key:0,class:"alert alert-success alert-dismissible fade show mt-2",role:"alert"},ke=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1),Me={class:"mt-3 border border-bottom-0 rounded"},Se={class:"table table-hover"},Ie=e("thead",{class:"text-primary"},[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col"},"Name"),e("th",{scope:"col"},"Email"),e("th",{scope:"col"},"Role"),e("th",{scope:"col"},"Status"),e("th",{scope:"col"},"Action"),e("th",{scope:"col"})])],-1),Te={key:0},Ae=["textContent"],Ve=["textContent"],Ne=["textContent"],Be=["textContent"],ze=["textContent"],De=["onClick"],Oe=e("button",{class:"btn btn-light dropdown-toggle btn-sm",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"true"},null,-1),Ge={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Fe=["onClick"],Ke={setup(n){const a=u(0),i=u([]),m=u(!0),h=u([]),v=u(""),b=d=>d===!1?"Wait":"Active",f=d=>{let l="";return h.value.length>0?(h.value.forEach(t=>{t.id===d&&(l=t.role.toUpperCase())}),l):d};async function $(d,l){v.value="";try{const t=R(),s=await le(t,{email:d,name:l});s.status==200&&C(),v.value=s.data.message}catch(t){console.log(t)}}async function p(d){v.value="";try{const l=R(),t=await re(l,d);v.value=t.data.message,t.status==200&&C()}catch(l){console.log(l)}}async function C(){try{const d=R(),l=await ne(d),t=await V();i.value=l.data.invitedUsers,a.value=l.data.total,h.value=t.data.UserRoles,m.value=!1}catch(d){console.log(d)}}return C(),(d,l)=>(r(),c(w,null,[e("div",Ce,[Re,a.value?(r(),c("span",{key:0,textContent:_(`(${a.value})`)},null,8,Le)):g("",!0)]),v.value?(r(),c("div",Ue,[L(_(v.value)+" ",1),ke])):g("",!0),y($e),e("div",Me,[e("table",Se,[Ie,i.value.length?(r(),c("tbody",Te,[(r(!0),c(w,null,M(i.value,(t,s)=>(r(),c("tr",{key:s},[e("th",{scope:"row",textContent:_(`${s+1}`)},null,8,Ae),e("td",{textContent:_(t.name)},null,8,Ve),e("td",{class:"gray-color",textContent:_(t.email)},null,8,Ne),e("td",{textContent:_(f(t.role_id))},null,8,Be),e("td",{class:"gray-color",textContent:_(b(t.inviteAccepted))},null,8,ze),e("td",null,[e("button",{class:"btn btn-light btn-sm",onClick:o=>$(t.email,t.name)}," Reinvite ",8,De)]),e("td",null,[Oe,e("ul",Ge,[e("li",null,[e("a",{class:"dropdown-item",onClick:o=>p(t.id)}," Revoke ",8,Fe)])])])]))),128))])):g("",!0)])])],64))}};const U=n=>(F("data-v-4049401c"),n=n(),K(),n),qe={class:"mt-5 fs-5"},He=L(" All Members "),Pe=["textContent"],We={class:"mt-3 border border-bottom-0 rounded"},Je={class:"topnav"},Qe={class:"table table-hover"},Xe={class:"text-primary"},Ye=U(()=>e("th",{scope:"col"},"#",-1)),Ze=L(" Name "),je=U(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-filter",viewBox:"0 0 16 16"},[e("path",{d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})],-1)),et=[Ze,je],tt=L(" Email "),st=U(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-filter",viewBox:"0 0 16 16"},[e("path",{d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})],-1)),at=[tt,st],ot=U(()=>e("th",{scope:"col"},"Status",-1)),nt=U(()=>e("th",{scope:"col"},"Action",-1)),lt={key:0},rt=["textContent"],it=["textContent"],ct=["textContent"],ut=["onClick","textContent"],dt={class:"dropdown"},_t=U(()=>e("button",{class:"btn btn-light dropdown-toggle btn-sm",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"true"},null,-1)),vt={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},ht=["onClick"],mt={setup(n){const a=u(0),i=u([]),m=u(i.value),h=u(!0),v=u(!0);async function b(){try{const t=R(),s=await ie(t);i.value=s.data.users,a.value=s.data.total,h.value=!1}catch{alert("Something went wrong, please try again later")}}async function f(t){try{const s=R(),o=await ce(s,i.value[t].id);h.value=!1,o.status==200&&(b(),alert(o.data.message))}catch{alert("Something went wrong, please try again later")}}async function $(t){try{const s=R(),o=await ue(s,i.value[t].id);h.value=!1,o.status==200&&(b(),alert(o.data.message))}catch{alert("Something went wrong, please try again later.")}}function p(t){return t=="1"?"Disable":"Enable"}function C(t){m.value.splice(0,i.value.length),i.value.forEach(s=>{s.name.includes(t)&&m.value.push(s),v.value=!1})}function d(t){return function(s,o){return s[t].toLowerCase()>o[t].toLowerCase()?1:s[t].toLowerCase()<o[t].toLowerCase()?-1:0}}function l(t){i.value.sort(d(t))}return b(),(t,s)=>(r(),c(w,null,[e("div",qe,[He,a.value?(r(),c("span",{key:0,textContent:_(`(${a.value})`)},null,8,Pe)):g("",!0)]),e("div",We,[e("div",Je,[A(e("input",{type:"text",placeholder:"Search..","onUpdate:modelValue":s[0]||(s[0]=o=>t.value=o),onInput:s[1]||(s[1]=o=>C(t.value))},null,544),[[G,t.value]])]),e("table",Qe,[e("thead",Xe,[e("tr",null,[Ye,e("th",{onClick:s[2]||(s[2]=o=>l("name")),scope:"col"},et),e("th",{onClick:s[3]||(s[3]=o=>l("email")),scope:"col"},at),ot,nt])]),h.value?(r(),c("p",lt,"Loading...")):g("",!0),e("tbody",null,[(r(!0),c(w,null,M(v.value?i.value:m.value,(o,k)=>(r(),c("tr",{key:o.id},[e("th",{scope:"row",textContent:_(o.id)},null,8,rt),e("td",{textContent:_(o.name)},null,8,it),e("td",{textContent:_(o.email)},null,8,ct),e("td",null,_(p(o.activeStatus)==="Enable"?"Disable":"Enable"),1),e("td",null,[e("button",{class:"btn btn-light btn-sm",onClick:S=>$(k),textContent:_(p(o.activeStatus))},null,8,ut)]),e("td",dt,[_t,e("ul",vt,[e("li",null,[e("a",{class:"dropdown-item",onClick:S=>f(k)}," Delete",8,ht)])])])]))),128))])])])],64))}};var pt=W(mt,[["__scopeId","data-v-4049401c"]]);const bt={class:"teams__container"},Rt={setup(n){const a=q();return a.userStatus=!1,(i,m)=>(r(),c(w,null,[y(J),e("main",null,[y(Q,{title:"Teams"}),e("div",bt,[y(Ke),y(pt)])])],64))}};export{Rt as default};
