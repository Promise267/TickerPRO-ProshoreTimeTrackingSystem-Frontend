import{r as i,o as h,c as P,a as l,u as a,b as t,w as V,R as C,h as $,i as B,j as b,F as S,e as f,l as U,by as q}from"./index.7f9b4149.js";import{_ as L}from"./BaseFormHeading.3cba0fc2.js";import{_ as g,v as j}from"./validateEmail.e76e1187.js";import{_ as F}from"./BaseAlert.b87f0a0a.js";import{s as A}from"./signUpPassword.047e96c0.js";import{l as D}from"./logo.5b10267d.js";import{_ as R}from"./PasswordToggle.6879ecfa.js";/* empty css                                                  */function z(v,u){const o={isValid:!0,errorMessage:""};return v===""?(o.isValid=!1,o.errorMessage="Confirm password field is required.",o):(v!==u&&(o.isValid=!1,o.errorMessage="Password and confirm password fields do not match."),o)}const G=["src"],H={class:"d-grid col-md-8 col-lg-5 mx-auto"},I={key:0,class:"alert alert-success",role:"alert"},J=f(" Password reset successfully! "),K=f("Login"),O=f(" to start using Time Tracker. "),Q=["onSubmit"],W={class:"input_form"},X={class:"input_form_confirmPassword"},Y=l("div",{class:"d-grid"},[l("button",{type:"submit",class:"btn btn-primary text-white mt-3","data-cy":"passwordResetSubmit"}," Password reset ")],-1),Z={class:"mt-4"},ss=f(" Never mind! "),es=l("u",null," Take me back to login",-1),ms={setup(v){const u=U(),o=u.query.token,k=u.query.email,s=i({email:k,password:"",passwordConfirmation:""}),m=i(""),c=i(""),w=i(""),p=i(""),_=i(!1);let n=i(!1),d=i(!1);async function x(){m.value="",c.value="",w.value="",p.value="",_.value=!1;const{isValid:y,errorMessage:e}=j(s.value.email),{isValid:r,errorMessage:T}=A(s.value.password),{isValid:E,errorMessage:M}=z(s.value.passwordConfirmation,s.value.password);if(y||(m.value=e,s.value.email=""),r||(c.value=T,s.value.password=""),E||(w.value=M,s.value.passwordConfirmation=""),p.value.length===0&&!m.value&&!c.value&&!w.value){const N={email:s.value.email,password:s.value.password,password_confirmation:s.value.passwordConfirmation,token:o};try{await q(N),_.value=!0,s.value.email="",s.value.password="",s.value.passwordConfirmation=""}catch{p.value(response.data.message)}}}return(y,e)=>(h(),P(S,null,[l("img",{src:a(D),alt:"Ticker logo",class:"logo"},null,8,G),l("div",H,[t(L,{title:"Password Reset",shortDesc:"Reset password to restart your journey with Time Tracker."}),_.value?(h(),P("div",I,[J,t(a(C),{to:{name:"login"},class:"alert-link text-decoration-underline","data-cy":"loginAfterResetButton"},{default:V(()=>[K]),_:1}),O])):$("",!0),t(F,{message:p.value,"hex-font-color":"ff0000"},null,8,["message"]),l("form",{onSubmit:B(x,["prevent"])},[t(g,{type:"email",name:"email",label:"Email address",modelValue:s.value.email,"onUpdate:modelValue":e[0]||(e[0]=r=>s.value.email=r),error:m.value,"data-cy":"passwordResetEmail"},null,8,["modelValue","error"]),l("div",W,[t(g,{type:a(n)?"text":"password",name:"password",label:"New password",modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=r=>s.value.password=r),error:c.value,"data-cy":"passwordResetPassword"},null,8,["type","modelValue","error"]),t(R,{showPassword:a(n),onTogglePassword:e[2]||(e[2]=r=>b(n)?n.value=!a(n):n=!a(n))},null,8,["showPassword"])]),l("div",X,[t(g,{type:a(d)?"text":"password",name:"password-confirmation",label:"Confirm password",modelValue:s.value.passwordConfirmation,"onUpdate:modelValue":e[3]||(e[3]=r=>s.value.passwordConfirmation=r),error:w.value,"data-cy":"passwordResetConfirmation"},null,8,["type","modelValue","error"]),t(R,{showPassword:a(d),onTogglePassword:e[4]||(e[4]=r=>b(d)?d.value=!a(d):d=!a(d))},null,8,["showPassword"])]),Y,l("p",Z,[ss,t(a(C),{to:{name:"login"},class:"text-secondary fw-normal","data-cy":"backToLoginButton"},{default:V(()=>[es]),_:1})])],40,Q)])],64))}};export{ms as default};
