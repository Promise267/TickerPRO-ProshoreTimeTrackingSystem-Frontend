import{r as l,f as j,s as D,o as r,c as t,a as i,u as n,b as o,w as b,h as k,F as P,g as Y,i as z,j as C,e as m,l as G,v as H}from"./index.8d1f63de.js";import{_ as v,v as I}from"./validateEmail.678a129c.js";import{_ as J}from"./BaseFormHeading.4563c656.js";import{_ as K}from"./BaseAlert.9db8dd94.js";import{s as O,v as Q}from"./validatePasswordConfirm.3da2fbc4.js";import{v as W}from"./validateName.6ce7ed4b.js";import{_ as x}from"./PasswordToggle.3d6cf5be.js";import{i as X}from"./index.min.365216a0.js";import{l as Z}from"./logo.5b10267d.js";/* empty css                                                  */const ee=["src"],ae={class:"d-grid col-md-8 col-lg-5 mx-auto"},se={key:0,class:"alert alert-success",role:"alert"},oe=m(" Signup successfully! "),le=m("Login"),re=m(" to start using Time Tracker. "),te={key:1,class:"alert alert-success",role:"alert"},ne=m(" Password reset successfully! "),ie=m("Login"),de=m(" to start using Time Tracker. "),ue={key:2},me=["onSubmit"],ve={class:"mb-3"},pe={key:0},ce={key:1},fe={key:2},we={key:3},_e={class:"input_form"},ge={class:"input_form"},ye={class:"d-grid"},he=["disabled"],Ve={class:"mt-4"},be=m(" Already have an account? "),ke=i("u",null,"Login",-1),Re={setup(Pe){const g=G(),U=g.params.token,E=g.query.email,N=g.query.name;let d=l(!1),u=l(!1);const S=X.exports.useToast(),T=l(""),e=l({name:N,email:E,password:"",passwordConfirmation:""}),p=l(""),c=l(""),_=l(""),y=l(""),f=l([]),h=l(!1),$=j(()=>e.value.name===""||e.value.email===""||e.value.password===""||e.value.passwordConfirmation==="");async function L(){f.value=[],p.value="",c.value="",_.value="",T.value="",h.value=!1;const{isValid:V,errorMessage:a}=W(e.value.name),{isValid:w,errorMessage:s}=I(e.value.email),{isValid:M,errorMessage:R}=O(e.value.password),{isValid:B,errorMessage:F}=Q(e.value.password,e.value.passwordConfirmation);if(V||(p.value=a,e.value.name=""),w||(c.value=s,e.value.email=""),M||(_.value=R,e.value.password=""),B||(y.value=F,e.value.passwordConfirmation=""),f.value.length===0&&!p.value&&!_.value&&!c.value&&!y.value){const A={name:e.value.name,email:e.value.email,password:e.value.password,password_confirmation:e.value.passwordConfirmation,token:U};try{await H(A),h.value=!0,e.value.name="",e.value.email="",e.value.password="",e.value.passwordConfirmation=""}catch(q){q.response.status===401?(f.value.push("Please enter an valid email."),e.value.email=""):(S.error("You have been revoked"),e.value.password="",e.value.passwordConfirmation="")}}}return(V,a)=>{const w=D("RouterLink");return r(),t(P,null,[i("img",{src:n(Z),alt:"Ticker logo",class:"logo"},null,8,ee),i("div",ae,[o(J,{title:"Sign up",shortDesc:"Start using Time Tracker for free."}),h.value?(r(),t("div",se,[oe,o(w,{to:{name:"login"},class:"alert-link text-decoration-underline"},{default:b(()=>[le]),_:1}),re])):k("",!0),V.passwordResetSuccess?(r(),t("div",te,[ne,o(w,{to:{name:"login"},class:"alert-link text-decoration-underline"},{default:b(()=>[ie]),_:1}),de])):k("",!0),f.value.length?(r(),t("div",ue,[(r(!0),t(P,null,Y(f.value,s=>(r(),t("div",{key:s},[o(K,{message:s,"hex-font-color":"ff0000"},null,8,["message"])]))),128))])):k("",!0),i("form",{onSubmit:z(L,["prevent"])},[i("div",ve,[e.value.name?(r(),t("div",ce,[o(v,{type:"text",name:"name",label:"Full Name",modelValue:e.value.name,"onUpdate:modelValue":a[1]||(a[1]=s=>e.value.name=s),error:p.value,disabled:!0,"data-cy":"signUpName"},null,8,["modelValue","error"])])):(r(),t("div",pe,[o(v,{type:"text",name:"name",label:"Full Name",modelValue:e.value.name,"onUpdate:modelValue":a[0]||(a[0]=s=>e.value.name=s),error:p.value,disabled:!1,"data-cy":"signUpName"},null,8,["modelValue","error"])])),e.value.email?(r(),t("div",we,[o(v,{type:"text",name:"email",label:"Email Address",modelValue:e.value.email,"onUpdate:modelValue":a[3]||(a[3]=s=>e.value.email=s),error:c.value,disabled:!0,"data-cy":"signUpEmail"},null,8,["modelValue","error"])])):(r(),t("div",fe,[o(v,{type:"text",name:"email",label:"Email Adress",modelValue:e.value.email,"onUpdate:modelValue":a[2]||(a[2]=s=>e.value.email=s),error:c.value,disabled:!1,"data-cy":"signUpEmail"},null,8,["modelValue","error"])])),i("div",_e,[o(v,{type:n(d)?"text":"password",name:"password",label:"Password",modelValue:e.value.password,"onUpdate:modelValue":a[4]||(a[4]=s=>e.value.password=s),error:_.value,"data-cy":"signUpPassword"},null,8,["type","modelValue","error"]),o(x,{showPassword:n(d),onTogglePassword:a[5]||(a[5]=s=>C(d)?d.value=!n(d):d=!n(d))},null,8,["showPassword"])]),i("div",ge,[o(v,{type:n(u)?"text":"password",name:"confirm-password",label:"Confirm password",modelValue:e.value.passwordConfirmation,"onUpdate:modelValue":a[6]||(a[6]=s=>e.value.passwordConfirmation=s),error:y.value,"data-cy":"signUpConfirmPassword"},null,8,["type","modelValue","error"]),o(x,{showPassword:n(u),onTogglePassword:a[7]||(a[7]=s=>C(u)?u.value=!n(u):u=!n(u))},null,8,["showPassword"])])]),i("div",ye,[i("button",{type:"submit",class:"btn btn-primary text-white",disabled:n($),"data-cy":"signUpSubmit"}," Sign up ",8,he)]),i("p",Ve,[be,o(w,{to:{name:"login"},class:"text-secondary fw-normal"},{default:b(()=>[ke]),_:1})])],40,me)])],64)}}};export{Re as default};
